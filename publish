#!/bin/bash

[ $1 ] || { echo "Usage: $0 <challenge number>" >&2; exit 2; }

challenge="$1"

set -e
set -v

git checkout master
git pull

git fetch upstream
git merge --ff-only upstream/master

git checkout dev
git pull
git merge --no-ff --no-edit master

git checkout muthm-$challenge \
    || git checkout -b muthm-$challenge
git checkout dev -- challenge-$challenge/matthias-muth
git commit -m "Challenge $challenge Task 1 and 2 solutions in Perl by Matthias Muth"
git push --set-upstream origin muthm-$challenge

git push --all
git push --tags

git checkout dev
